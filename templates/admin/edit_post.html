{% extends "base.html" %}
{% block title %}Edit Blog Post{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto px-6 py-12">
    <h1 class="text-3xl font-bold mb-6">Edit Blog Post</h1>

    <!-- Form for editing post, supports file uploads -->
    <form method="POST" enctype="multipart/form-data">

        <!-- Title -->
        <label class="block mb-2 font-semibold">Title</label>
        <input type="text" name="title" value="{{ post.title }}" class="w-full p-2 border rounded mb-4" required>

        <!-- Content -->
        <label class="block mb-2 font-semibold">Content</label>
        <textarea name="content" class="w-full p-2 border rounded mb-4" rows="8" required>{{ post.content }}</textarea>

        <!-- Current Image -->
        {% if post.image %}
        <label class="block mb-2 font-semibold">Current Image</label>
        <img src="{{ url_for('static', filename='uploads/blog/' ~ post.image) }}" alt="Current Image" class="mb-4 max-h-64">
        {% endif %}

        <!-- Upload New Image -->
        <label class="block mb-2 font-semibold">Replace Image (optional)</label>
        <input type="file" name="image" accept=".png,.jpg,.jpeg,.gif" class="w-full mb-4">

        <!-- Current Video -->
        {% if post.video %}
        <label class="block mb-2 font-semibold">Current Video</label>
        <video controls class="mb-4 max-h-64 w-full">
            <source src="{{ url_for('static', filename='uploads/blog/' ~ post.video) }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        {% endif %}

        <!-- Upload New Video -->
        <label class="block mb-2 font-semibold">Replace Video (optional)</label>
        <input type="file" name="video" accept=".mp4,.mov,.avi" class="w-full mb-4">

        <!-- Published Checkbox -->
        <label class="flex items-center mb-4">
            <input type="checkbox" name="published" class="mr-2" {% if post.published %}checked{% endif %}> Published
        </label>

        <!-- Submit -->
        <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
            Update Post
        </button>
    </form>
</div>
{% endblock %}
